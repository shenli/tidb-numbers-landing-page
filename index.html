<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/tidb-numbers-landing-page/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/tidb-numbers-landing-page/_next/static/chunks/webpack-ad60b8d4d32b4d52.js" defer=""></script><script src="/tidb-numbers-landing-page/_next/static/chunks/framework-e55aa146278238ba.js" defer=""></script><script src="/tidb-numbers-landing-page/_next/static/chunks/main-4188f8873da29c97.js" defer=""></script><script src="/tidb-numbers-landing-page/_next/static/chunks/pages/_app-6a626577ffa902a4.js" defer=""></script><script src="/tidb-numbers-landing-page/_next/static/chunks/548-d0b2735f9e6c7f49.js" defer=""></script><script src="/tidb-numbers-landing-page/_next/static/chunks/pages/index-511ac598a379a1d6.js" defer=""></script><script src="/tidb-numbers-landing-page/_next/static/Sf0XFzyPYkjbzy1inKd6J/_buildManifest.js" defer=""></script><script src="/tidb-numbers-landing-page/_next/static/Sf0XFzyPYkjbzy1inKd6J/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="min-h-screen bg-white text-gray-900"><button class="fixed top-4 right-4 p-2 rounded-full z-50 bg-gray-200 text-gray-600">ðŸŒ™</button><nav class="w-full bg-white shadow-md"><div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8"><div class="flex justify-between items-center h-16"><div class="flex items-center"><img src="https://avatars.githubusercontent.com/u/1192573?v=4" alt="Logo" width="40" height="40" class="rounded-full mr-3"/><span class="text-xl font-bold text-gray-900">tidb-numbers</span></div><div class="flex items-center space-x-4"><a href="#" class="text-gray-600 hover:text-gray-900">Product</a><a href="#" class="text-gray-600 hover:text-gray-900">Pricing</a><a href="#" class="text-gray-600 hover:text-gray-900">Docs</a><a href="#" class="text-gray-600 hover:text-gray-900">Community</a><a href="#" class="text-gray-600 hover:text-gray-900">Company</a><a href="https://github.com/shenli/tidb-numbers" class="flex items-center text-gray-600 hover:text-gray-900"><svg class="h-5 w-5 mr-1" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z" clip-rule="evenodd"></path></svg>2<!-- -->k stars</a></div></div></div></nav><div class="w-full bg-gradient-to-br from-white via-purple-50 to-violet-100"><div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-20"><div class="flex flex-col md:flex-row items-center"><div class="w-full md:w-1/2 mb-10 md:mb-0"><h1 class="text-5xl md:text-6xl font-extrabold mb-6 text-transparent bg-clip-text bg-gradient-to-r from-purple-900 to-violet-600" style="opacity:0;will-change:opacity,transform;transform:translateY(-20px)">A powerful open-source project</h1><p class="text-xl mb-8 text-gray-700">Numbers every TiDB developer should know</p><div class="flex space-x-8 mb-8"><div class="flex items-center"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-star w-8 h-8 text-yellow-500 mr-2"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg><div><span class="text-4xl font-bold block text-gray-900">2</span><p class="text-sm uppercase tracking-wide text-gray-500">Stars</p></div></div><div class="flex items-center"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-users w-8 h-8 text-blue-500 mr-2"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg><div><span class="text-4xl font-bold block text-gray-900">1</span><p class="text-sm uppercase tracking-wide text-gray-500">Contributors</p></div></div></div><div class="flex space-x-4"><a href="https://github.com/shenli/tidb-numbers" class="bg-purple-600 text-white px-6 py-3 rounded-md font-semibold hover:opacity-90 transition duration-300" target="_blank" rel="noopener noreferrer">View on GitHub</a><button class="flex items-center justify-center bg-blue-500 text-white px-6 py-3 rounded-md font-semibold hover:opacity-90 transition duration-300"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-twitter mr-2"><path d="M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z"></path></svg>Share on Twitter</button></div></div><div class="w-full md:w-1/2 md:pl-8"><div class="bg-white h-80 rounded-lg flex items-center justify-center shadow-lg"><p class="text-gray-600">Placeholder for diagram</p></div></div></div></div></div><div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8"><div class="py-20 bg-white"><div class="container mx-auto px-4"><h2 class="text-3xl font-bold mb-12 text-center text-gray-900">Key Features</h2><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"><div class="bg-white p-6 rounded-lg shadow-lg" style="opacity:0;will-change:opacity,transform;transform:translateY(20px)"><h3 class="text-xl font-semibold mb-2 text-gray-900">Feature 1</h3><p class="text-gray-600">Description of feature 1</p></div><div class="bg-white p-6 rounded-lg shadow-lg" style="opacity:0;will-change:opacity,transform;transform:translateY(20px)"><h3 class="text-xl font-semibold mb-2 text-gray-900">Feature 2</h3><p class="text-gray-600">Description of feature 2</p></div><div class="bg-white p-6 rounded-lg shadow-lg" style="opacity:0;will-change:opacity,transform;transform:translateY(20px)"><h3 class="text-xl font-semibold mb-2 text-gray-900">Feature 3</h3><p class="text-gray-600">Description of feature 3</p></div></div></div></div><div class="py-20 bg-white"><div class="container mx-auto px-4"><h2 class="text-3xl font-bold mb-12 text-center text-gray-900">Trusted By</h2><div class="flex flex-wrap justify-center items-center"><div class="m-4 p-4 bg-gray-100 rounded-lg"><img src="https://via.placeholder.com/150x50?text=Company1" alt="Company1" width="150" height="50"/></div><div class="m-4 p-4 bg-gray-100 rounded-lg"><img src="https://via.placeholder.com/150x50?text=Company2" alt="Company2" width="150" height="50"/></div><div class="m-4 p-4 bg-gray-100 rounded-lg"><img src="https://via.placeholder.com/150x50?text=Company3" alt="Company3" width="150" height="50"/></div></div></div></div><div class="py-16 bg-gray-50"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><h2 class="text-3xl font-extrabold text-gray-900 mb-8">What People Are Saying</h2><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div></div></div><div class="py-20 bg-gray-100"><div class="container mx-auto px-4"><h2 class="text-3xl font-bold mb-8 text-center text-gray-900">Join Our Waiting List</h2><p class="text-xl mb-8 text-center text-gray-600">Be the first to experience our revolutionary product. Sign up now and get early access!</p><form class="max-w-md mx-auto"><div class="flex flex-col sm:flex-row gap-4"><input type="email" placeholder="Enter your email address" class="flex-grow px-4 py-2 rounded-md bg-white text-gray-900" required="" value=""/><button type="submit" class="bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-2 rounded-md font-semibold transition duration-300">Join Waitlist</button></div></form></div></div><div class="py-20 bg-indigo-600"><div class="container mx-auto px-4 text-center"><h2 class="text-3xl font-bold mb-8 text-white">Ready to Get Started?</h2><a href="https://github.com/shenli/tidb-numbers" class="bg-white text-indigo-600 px-8 py-3 rounded-md font-semibold hover:bg-gray-100 transition duration-300" target="_blank" rel="noopener noreferrer">Star on GitHub</a></div></div></div><footer class="bg-gray-100 py-12"><div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8"><div class="grid grid-cols-2 md:grid-cols-4 gap-8"><div><h3 class="text-gray-900 font-semibold mb-4 capitalize">project</h3><ul class="space-y-2"><li><a href="https://github.com/shenli/tidb-numbers" class="text-gray-600 hover:text-gray-900" target="_blank" rel="noopener noreferrer">GitHub</a></li></ul></div><div><h3 class="text-gray-900 font-semibold mb-4 capitalize">company</h3><ul class="space-y-2"><li><a href="#" class="text-gray-600 hover:text-gray-900" target="_blank" rel="noopener noreferrer">About</a></li></ul></div><div><h3 class="text-gray-900 font-semibold mb-4 capitalize">developers</h3><ul class="space-y-2"><li><a href="#" class="text-gray-600 hover:text-gray-900" target="_blank" rel="noopener noreferrer">Documentation</a></li></ul></div></div><div class="mt-8 pt-8 border-t border-gray-200 flex flex-col md:flex-row justify-between items-center"><div class="flex space-x-6 mb-4 md:mb-0"><a href="https://github.com/shenli/tidb-numbers" class="text-gray-600 hover:text-gray-900" target="_blank" rel="noopener noreferrer"><span class="sr-only">github</span><i class="fab fa-github"></i></a></div><p class="text-gray-600 text-sm">tidb-numbers<!-- --> is open source software under the <!-- -->Apache License 2.0<!-- --> license.</p></div></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"repoInfo":{"id":771713997,"node_id":"R_kgDOLf9rzQ","name":"tidb-numbers","full_name":"shenli/tidb-numbers","private":false,"owner":{"login":"shenli","id":1192573,"node_id":"MDQ6VXNlcjExOTI1NzM=","avatar_url":"https://avatars.githubusercontent.com/u/1192573?v=4","gravatar_id":"","url":"https://api.github.com/users/shenli","html_url":"https://github.com/shenli","followers_url":"https://api.github.com/users/shenli/followers","following_url":"https://api.github.com/users/shenli/following{/other_user}","gists_url":"https://api.github.com/users/shenli/gists{/gist_id}","starred_url":"https://api.github.com/users/shenli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shenli/subscriptions","organizations_url":"https://api.github.com/users/shenli/orgs","repos_url":"https://api.github.com/users/shenli/repos","events_url":"https://api.github.com/users/shenli/events{/privacy}","received_events_url":"https://api.github.com/users/shenli/received_events","type":"User","site_admin":false},"html_url":"https://github.com/shenli/tidb-numbers","description":"Numbers every TiDB developer should know","fork":false,"url":"https://api.github.com/repos/shenli/tidb-numbers","forks_url":"https://api.github.com/repos/shenli/tidb-numbers/forks","keys_url":"https://api.github.com/repos/shenli/tidb-numbers/keys{/key_id}","collaborators_url":"https://api.github.com/repos/shenli/tidb-numbers/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/shenli/tidb-numbers/teams","hooks_url":"https://api.github.com/repos/shenli/tidb-numbers/hooks","issue_events_url":"https://api.github.com/repos/shenli/tidb-numbers/issues/events{/number}","events_url":"https://api.github.com/repos/shenli/tidb-numbers/events","assignees_url":"https://api.github.com/repos/shenli/tidb-numbers/assignees{/user}","branches_url":"https://api.github.com/repos/shenli/tidb-numbers/branches{/branch}","tags_url":"https://api.github.com/repos/shenli/tidb-numbers/tags","blobs_url":"https://api.github.com/repos/shenli/tidb-numbers/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/shenli/tidb-numbers/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/shenli/tidb-numbers/git/refs{/sha}","trees_url":"https://api.github.com/repos/shenli/tidb-numbers/git/trees{/sha}","statuses_url":"https://api.github.com/repos/shenli/tidb-numbers/statuses/{sha}","languages_url":"https://api.github.com/repos/shenli/tidb-numbers/languages","stargazers_url":"https://api.github.com/repos/shenli/tidb-numbers/stargazers","contributors_url":"https://api.github.com/repos/shenli/tidb-numbers/contributors","subscribers_url":"https://api.github.com/repos/shenli/tidb-numbers/subscribers","subscription_url":"https://api.github.com/repos/shenli/tidb-numbers/subscription","commits_url":"https://api.github.com/repos/shenli/tidb-numbers/commits{/sha}","git_commits_url":"https://api.github.com/repos/shenli/tidb-numbers/git/commits{/sha}","comments_url":"https://api.github.com/repos/shenli/tidb-numbers/comments{/number}","issue_comment_url":"https://api.github.com/repos/shenli/tidb-numbers/issues/comments{/number}","contents_url":"https://api.github.com/repos/shenli/tidb-numbers/contents/{+path}","compare_url":"https://api.github.com/repos/shenli/tidb-numbers/compare/{base}...{head}","merges_url":"https://api.github.com/repos/shenli/tidb-numbers/merges","archive_url":"https://api.github.com/repos/shenli/tidb-numbers/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/shenli/tidb-numbers/downloads","issues_url":"https://api.github.com/repos/shenli/tidb-numbers/issues{/number}","pulls_url":"https://api.github.com/repos/shenli/tidb-numbers/pulls{/number}","milestones_url":"https://api.github.com/repos/shenli/tidb-numbers/milestones{/number}","notifications_url":"https://api.github.com/repos/shenli/tidb-numbers/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/shenli/tidb-numbers/labels{/name}","releases_url":"https://api.github.com/repos/shenli/tidb-numbers/releases{/id}","deployments_url":"https://api.github.com/repos/shenli/tidb-numbers/deployments","created_at":"2024-03-13T20:10:10Z","updated_at":"2024-05-07T19:00:32Z","pushed_at":"2024-03-15T18:14:00Z","git_url":"git://github.com/shenli/tidb-numbers.git","ssh_url":"git@github.com:shenli/tidb-numbers.git","clone_url":"https://github.com/shenli/tidb-numbers.git","svn_url":"https://github.com/shenli/tidb-numbers","homepage":null,"size":8,"stargazers_count":2,"watchers_count":2,"language":null,"has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":0,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":0,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":0,"open_issues":0,"watchers":2,"default_branch":"main","permissions":{"admin":true,"maintain":true,"push":true,"triage":true,"pull":true},"temp_clone_token":"","network_count":0,"subscribers_count":2},"readmeContent":"# Numbers every TiDB Developer should know\n\nAt Google, there was a document put together by Jeff Dean, the legendary engineer, called [Numbers every Engineer should know](http://brenocon.com/dean_perf.html). Itâ€™s really useful to have a similar set of numbers for TiDB developers to know that are useful for back-of-the envelope calculations. Here I share particular numbers I at PingCAP use, why the number is important and how to use it to your advantage.\n\n## Data Ingestion\n\nTiDB provides a tool named [TiDB-Lighting](https://docs.pingcap.com/tidb/stable/tidb-lightning-overview) (or Lightning) for data importing. There are two types of importing model:\n\n* [Physical mode](https://docs.pingcap.com/tidb/stable/tidb-lightning-physical-import-mode-usage): convert csv files into RocksDB SST files and ingest the SST files into storage engine. This is good for importing data into a brand new table.\n* [Logical mode](https://docs.pingcap.com/tidb/stable/tidb-lightning-logical-import-mode-usage): convert csv data into INSERT statement and use MySQL protocol to ingest data. This is good for importing data into a table which contains data.\n  \nFor Physical import **200GiB/h per Lightning instance**, logical import **50GiB/h per Lightning instance**. Maximum Lightning instance number is 10.\n\n### Two cases for reference\n\n* A top fintech company imported 100T data within 31 hours (with 10 Lightning instances)\n14.5TB data took 3h56m\n* 2 tables, one with 2 columns, and another one with 4 columns\n  - only have PK, no secondary index, and row size is about 2~2.3 KB\n  - 10 Lightning instances\n\n### Factors affecting ingesting speed\n* Cluster configuration (how many instances/CPUs/disk)\n* The schema of the data\n    - number of secondary index (encoding and ingesting index data cost extra time)\n    - If there is any unique index (uniqueness checking costs extra time)\n* Number of Lightning instance (parallel ingestion)\n\n## Schema Change (DDL)\n### The Speed of DDL\n\n| DDL Operation Type                                                | Estimated Time                                                          |\n|-------------------------------------------------------------------|-------------------------------------------------------------------------|\n| Change Column Type   (Incompactiable Change, such as Int to Text) | Depends on the amount of data, system load, and DDL parameter settings. |\n| Change Column Type (Compatiable Change, such as Int to BigInt)    | \u003c1s                                                                     |\n| Add Index                                                         | Depends on the amount of data, system load, and DDL parameter settings. |\n| Add Column                                                        | \u003c1s                                                                     |\n| Drop Column                                                       | \u003c1s                                                                     |\n| Create Table                                                      | \u003c1s                                                                     |\n| Drop Table                                                        | \u003c1s                                                                     |\n| Truncate Table                                                    | \u003c1s                                                                     |\n\n\n### Indexing Speed\n\n#### Factors affecting indexing speed\n\n* Cluster configuration (TiDB/TiKV instances/CPU/Disk)\n* Tabel definition\n    - Index type\n    - unique or non-unique\n    - single-column index or composed index\n* Ideal cluster or busy cluster\n\n\n#### Benchmark\nTiDB: \n* v6.5\n* TiDB Server:  (16c + 32G) * 2 \n* TiKV Server:  (16c + 64G + 1T) * 9\n\nTable Definition:\n```\nCREATE TABLE `sbtest1` (\n`id` int(20) NOT NULL,\n`k` int(11) NOT NULL DEFAULT '0',\n`c` char(120) NOT NULL DEFAULT '',\n`pad` char(60) NOT NULL DEFAULT '',\nPRIMARY KEY (`id`) /*T![clustered_index] CLUSTERED */\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;\n```\n\nDDL: `Alter table sbtest1 add key K_1(k);`\n\n| **# of Record** | **Data Volume (GB)** | **Index Speed (time spend)** | **Indexing SpeedÂ  (million rows per sec)** |\n|---|---|:-:|:-:|\n| **100 million** | 20 | 1 min 18 sec | 1.28 |\n| **1 billion** | 195 | 13 min 42 sec | 1.22 |\n| **5 billion** | 918 | 1 h 5 min 5 sec | 1.28 |\n\n\n## Columnar Storage Engine (TiFlash)\n### Replication Lag\nWith TiKV and TiFlash, what does the replication lag look like?\nWithin sub-second if write load is not high, seconds to minutes for high write workload.\n\nFor example: with 2000 write TPS, in-place update random records in a huge table, the P99 lag is \u003c 600ms.\n\n### Query Performance\nThe comfortable zone of a single TiFlash node is tens of QPS.\nFor example: a TiFlash node with 1TB data, \u003c50 qps would be OK.\n\nIf there are proper indexes with good selectivity, the QPS can be much higher. In this case, planner can leverage TiKV to do more efficient filtering with indexes.\n\n## Capacity Planning\n### Storage\n* Single TiKV instance servers 4TB data.\n* Keep the TiKV storage utilization under 80%.\n* Data compressing rate of TiKV is 3~6.\n","contributors":[{"login":"shenli","id":1192573,"node_id":"MDQ6VXNlcjExOTI1NzM=","avatar_url":"https://avatars.githubusercontent.com/u/1192573?v=4","gravatar_id":"","url":"https://api.github.com/users/shenli","html_url":"https://github.com/shenli","followers_url":"https://api.github.com/users/shenli/followers","following_url":"https://api.github.com/users/shenli/following{/other_user}","gists_url":"https://api.github.com/users/shenli/gists{/gist_id}","starred_url":"https://api.github.com/users/shenli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shenli/subscriptions","organizations_url":"https://api.github.com/users/shenli/orgs","repos_url":"https://api.github.com/users/shenli/repos","events_url":"https://api.github.com/users/shenli/events{/privacy}","received_events_url":"https://api.github.com/users/shenli/received_events","type":"User","site_admin":false,"contributions":3}],"generatedContent":{"tagline":"A powerful open-source project","features":[{"title":"Feature 1","description":"Description of feature 1"},{"title":"Feature 2","description":"Description of feature 2"},{"title":"Feature 3","description":"Description of feature 3"}],"adoption":["Company1","Company2","Company3"],"footerLinks":{"project":[{"text":"GitHub","url":"https://github.com/shenli/tidb-numbers"}],"company":[{"text":"About","url":"#"}],"developers":[{"text":"Documentation","url":"#"}]},"socialLinks":["https://github.com/shenli/tidb-numbers"],"companyInfo":{"name":"Project Name","description":"Short description of the project","founded":"Year founded","headquarters":"Location"},"documentationLink":"#","communityLinks":{"forum":"#","chat":"#","stackoverflow":"#"}}},"__N_SSG":true},"page":"/","query":{},"buildId":"Sf0XFzyPYkjbzy1inKd6J","assetPrefix":"/tidb-numbers-landing-page","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>